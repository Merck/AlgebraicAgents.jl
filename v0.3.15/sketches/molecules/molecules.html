<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>A Toy Pharma Model · AlgebraicAgents.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../index.html">AlgebraicAgents.jl</a></span></div><form class="docs-search" action="../../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../index.html">API Documentation</a></li><li><a class="tocitem" href="../../design_mmd.html">Framework design</a></li><li><a class="tocitem" href="../../integrations.html">Integrations</a></li><li><span class="tocitem">Sketches</span><ul><li><a class="tocitem" href="../agents/agents.html">Agents.jl Integration</a></li><li class="is-active"><a class="tocitem" href="molecules.html">A Toy Pharma Model</a><ul class="internal"><li><a class="tocitem" href="#Agent-Types"><span>Agent Types</span></a></li><li><a class="tocitem" href="#Stepping-Functions"><span>Stepping Functions</span></a></li><li><a class="tocitem" href="#Model-Instantiation"><span>Model Instantiation</span></a></li><li><a class="tocitem" href="#Simulating-the-System"><span>Simulating the System</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li><li><a class="tocitem" href="#Queries"><span>Queries</span></a></li></ul></li><li><a class="tocitem" href="../sciml/sciml.html">SciML Integration</a></li><li><a class="tocitem" href="../algebraicdynamics/algebraicdynamics.html">Lotka-Voltera Two Ways</a></li><li><a class="tocitem" href="../stochastic_simulation/anderson.html">Simulating Stochastic Reaction Systems</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sketches</a></li><li class="is-active"><a href="molecules.html">A Toy Pharma Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="molecules.html">A Toy Pharma Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Merck/AlgebraicAgents.jl/blob/main/tutorials/molecules/molecules.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="A-Toy-Pharma-Model"><a class="docs-heading-anchor" href="#A-Toy-Pharma-Model">A Toy Pharma Model</a><a id="A-Toy-Pharma-Model-1"></a><a class="docs-heading-anchor-permalink" href="#A-Toy-Pharma-Model" title="Permalink"></a></h1><p>We implement a toy pharma model. To that end, we have the following type hierarchy:</p><ul><li>overarching <strong>pharma model</strong> (represented by a <code>FreeAgent</code> span type),</li><li><strong>therapeutic area</strong> (represented by a <code>FreeAgent</code>),</li><li><strong>molecules</strong> (small, large - to demonstrate dynamic dispatch; alternatively, marketed drugs; a drug may drop out from the system),</li><li><strong>discovery unit</strong> (per therapeutic area); these generate new molecules according to a Poisson counting process,</li><li><strong>market demand</strong>; this will be represented by a stochastic differential equation implemented in <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations.jl</a>.</li></ul><h2 id="Agent-Types"><a class="docs-heading-anchor" href="#Agent-Types">Agent Types</a><a id="Agent-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Agent-Types" title="Permalink"></a></h2><p>We define the type system and supply the stepping functions.</p><pre><code class="language-julia hljs">using AlgebraicAgents

using DataFrames
using Distributions, Random
using Plots

# type hierarchy
&quot;Drug entity, lives in a therapeutic area.&quot;
abstract type Molecule &lt;: AbstractAlgebraicAgent end

# molecule params granularity
const N = 3;

# drug entity, lives in a therapeutic area
&quot;Parametrized drug entity, lives in a therapeutic area.&quot;
@aagent FreeAgent Molecule struct SmallMolecule
    age::Float64
    birth_time::Float64
    time_removed::Float64

    mol::AbstractString
    profile::NTuple{N, Float64}

    sales::Float64
    df_sales::DataFrame
end</code></pre><p>Note the use of a conveniency macro <code>@aagent</code> which appends additional fields expected (not required, though) by default interface methods.</p><p>We proceed with other agent types.</p><pre><code class="language-julia hljs"># drug entity, lives in a therapeutic area
@doc (@doc SmallMolecule)
@aagent FreeAgent Molecule struct LargeMolecule
    age::Float64
    birth_time::Float64
    time_removed::Float64

    mol::AbstractString
    profile::NTuple{N, Float64}

    sales::Float64
    df_sales::DataFrame
end

# toy discovery unit - outputs small/large molecules to a given therapeutic area
&quot;Toy discovery unit; outputs small and large molecules.&quot;
@aagent struct Discovery
    rate_small::Float64
    rate_large::Float64
    discovery_intensity::Float64

    t::Float64
    dt::Float64

    t0::Float64

    removed_mols::Vector{Tuple{String, Float64}}

    df_output::DataFrame
end

# `Discovery` constructor
&quot;Initialize a discovery unit, parametrized by small/large molecules production rate.&quot;
function Discovery(name, rate_small, rate_large, t = 0.0; dt = 2.0)
    df_output = DataFrame(time = Float64[], small = Int[], large = Int[], removed = Int[])

    Discovery(name, rate_small, rate_large, 0.0, t, dt, t, Tuple{String, Float64}[],
              df_output)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.Discovery</code></pre><h2 id="Stepping-Functions"><a class="docs-heading-anchor" href="#Stepping-Functions">Stepping Functions</a><a id="Stepping-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Stepping-Functions" title="Permalink"></a></h2><p>Next we provide an evolutionary law for the agent types. This is done by extending the interface function <a href="../../index.html#AlgebraicAgents._step!-Tuple{AbstractAlgebraicAgent}"><code>AlgebraicAgents._step!</code></a>.</p><pre><code class="language-julia hljs"># Return initial sales volume of a molecule.
function sales0_from_params end

const sales0_factor_small = rand(N)
const sales0_factor_large = rand(N)

# dispatch on molecule type
sales0_from_params(profile) = 10^3 * (1 + collect(profile)&#39; * sales0_factor_small)
sales0_from_params(profile) = 10^5 * (1 + collect(profile)&#39; * sales0_factor_large)

const sales_decay_small = 0.9
const sales_decay_large = 0.7

# implement evolution
function AlgebraicAgents._step!(mol::SmallMolecule)
    t = projected_to(mol)
    push!(mol.df_sales, (t, mol.sales))
    mol.age += 1
    mol.sales *= sales_decay_small

    if (mol.sales &lt;= 10) || (rand() &gt;= exp(-0.2 * mol.age))
        mol.time_removed = t
        push!(getagent(mol, &quot;../dx&quot;).removed_mols, (mol.mol, t))

        # move to removed candidates
        rm_mols = getagent(mol, &quot;../removed-molecules&quot;)
        disentangle!(mol)
        entangle!(rm_mols, mol)
    end
end

# implement common interface&quot;
# molecules&quot;
function AlgebraicAgents._step!(mol::LargeMolecule)
    t = projected_to(mol)
    push!(mol.df_sales, (t, mol.sales))

    mol.age += 1
    mol.sales *= sales_decay_large

    if (mol.sales &lt;= 10) || (rand() &gt;= exp(-0.3 * mol.age))
        mol.time_removed = t
        push!(getagent(mol, &quot;../dx&quot;).removed_mols, (mol.mol, t))

        # move to removed candidates
        rm_mols = getagent(mol, &quot;../removed-molecules&quot;)
        disentangle!(mol)
        entangle!(rm_mols, mol)
    end
end

# discovery
function AlgebraicAgents._step!(dx::Discovery)
    t = projected_to(dx)
    # sync with market demand
    dx.discovery_intensity = getobservable(getagent(dx, &quot;../demand&quot;), &quot;demand&quot;)
    ν = dx.discovery_intensity * dx.dt
    small, large = rand(Poisson(ν * dx.rate_small)), rand(Poisson(ν * dx.rate_large))
    removeed = 0
    ix = 1
    while ix &lt;= length(dx.removed_mols)
        if (dx.removed_mols[ix][2] &lt; t)
            removeed += 1
            deleteat!(dx.removed_mols, ix)
        else
            ix += 1
        end
    end
    push!(dx.df_output, (t, small, large, removeed))

    for _ in 1:small
        mol = release_molecule(randstring(5), Tuple(rand(N)), t, SmallMolecule)
        entangle!(getparent(dx), mol)
    end

    for _ in 1:large
        mol = release_molecule(randstring(5), Tuple(rand(N)), t, LargeMolecule)
        entangle!(getparent(dx), mol)
    end

    dx.t += dx.dt
end

&quot;Initialize a new molecule.&quot;
function release_molecule(mol, profile, t, ::Type{T}) where {T &lt;: Molecule}
    T(mol, 0.0, t, Inf, mol, profile, sales0_from_params(profile),
      DataFrame(time = Float64[], sales = Float64[]))
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.release_molecule</code></pre><p>We provide additional interface methods, such as <a href="../../index.html#AlgebraicAgents._reinit!-Tuple{AbstractAlgebraicAgent}"><code>AlgebraicAgents._reinit!</code></a> and <a href="../../index.html#AlgebraicAgents._projected_to-Tuple{AbstractAlgebraicAgent}"><code>AlgebraicAgents._projected_to</code></a>.</p><pre><code class="language-julia hljs">AlgebraicAgents._reinit!(mol::Molecule) = disentangle!(mol)

function AlgebraicAgents._reinit!(dx::Discovery)
    dx.t = dx.t0
    dx.discovery_intensity = 0.0
    empty!(dx.df_output)

    dx
end

function AlgebraicAgents._projected_to(mol::Molecule)
    if mol.time_removed &lt; Inf
        # candidate removed, do not step further
        true
    else
        mol.age + mol.birth_time
    end
end

AlgebraicAgents._projected_to(dx::Discovery) = dx.t</code></pre><p>We may also provide a custom plotting recipe. As the internal log is modeled as a DataFrame, we want to use <a href="../../index.html#AlgebraicAgents.@draw_df"><code>AlgebraicAgents.@draw_df</code></a> convenience macro.</p><pre><code class="language-julia hljs"># implement plots
AlgebraicAgents.@draw_df Discovery df_output</code></pre><h2 id="Model-Instantiation"><a class="docs-heading-anchor" href="#Model-Instantiation">Model Instantiation</a><a id="Model-Instantiation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Instantiation" title="Permalink"></a></h2><p>Next step is to instantiate a dynamical system.</p><pre><code class="language-julia hljs"># define therapeutic areas
therapeutic_area1 = FreeAgent(&quot;therapeutic_area1&quot;)
therapeutic_area2 = FreeAgent(&quot;therapeutic_area2&quot;)

# join therapeutic models into a pharma model
pharma_model = ⊕(therapeutic_area1, therapeutic_area2; name=&quot;pharma_model&quot;)

# initialize and push discovery units to therapeutic areas
# discovery units evolve at different pace
entangle!(therapeutic_area1, Discovery(&quot;dx&quot;, 5.2, 10.; dt=3.))
entangle!(therapeutic_area2, Discovery(&quot;dx&quot;, 6., 8.; dt=5.))
# log removed candidates
entangle!(therapeutic_area1, FreeAgent(&quot;removed-molecules&quot;))
entangle!(therapeutic_area2, FreeAgent(&quot;removed-molecules&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">agent <span class="sgr32"><span class="sgr1">removed-molecules </span></span>with uuid <span class="sgr32">ed859c6c </span>of type <span class="sgr32">FreeAgent </span>
   <span class="sgr1">parent: </span><span class="sgr32">therapeutic_area2</span></code></pre><h3 id="Integration-with-SciML"><a class="docs-heading-anchor" href="#Integration-with-SciML">Integration with SciML</a><a id="Integration-with-SciML-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-with-SciML" title="Permalink"></a></h3><p>Let&#39;s define toy market demand model and represent this as a stochastic differential equation defined in <code>DifferentialEquations.jl</code></p><pre><code class="language-julia hljs"># add SDE models for drug demand in respective areas
using DifferentialEquations

dt = 1//2^(4); tspan = (0.0,100.)
f(u,p,t) = p[1]*u; g(u,p,t) = p[2]*u

prob_1 = SDEProblem(f,g,.9,tspan,[.01, .01])
prob_2 = SDEProblem(f,g,1.2,tspan,[.01, .01])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SDEProblem with uType Float64 and tType Float64. In-place: false
timespan: (0.0, 100.0)
u0: 1.2</code></pre><p>Internally, a discovery unit will adjust the candidate generating process intensity according to the observed market demand:</p><pre><code class="language-julia hljs"># add SDE models for drug demand in respective areas
demand_model_1 = DiffEqAgent(&quot;demand&quot;, prob_1, EM(); observables=Dict(&quot;demand&quot; =&gt; 1), dt)
demand_model_2 = DiffEqAgent(&quot;demand&quot;, prob_2, EM(); observables=Dict(&quot;demand&quot; =&gt; 1), dt)

# push market demand units to therapeutic areas
entangle!(therapeutic_area1, demand_model_1)
entangle!(therapeutic_area2, demand_model_2)

# sync with market demand
getobservable(getagent(pharma_model, &quot;therapeutic_area1/demand&quot;), &quot;demand&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.9</code></pre><p>Let&#39;s inspect the composite model:</p><pre><code class="language-julia hljs"># show the model
pharma_model</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">agent <span class="sgr32"><span class="sgr1">pharma_model </span></span>with uuid <span class="sgr32">e081a5db </span>of type <span class="sgr32">FreeAgent </span>
   <span class="sgr1">inner agents: </span>
    agent <span class="sgr32"><span class="sgr1">therapeutic_area1 </span></span>with uuid <span class="sgr32">0e6fc1c8 </span>of type <span class="sgr32">FreeAgent </span>
       <span class="sgr1">inner agents: </span>demand, dx, removed-molecules
    agent <span class="sgr32"><span class="sgr1">therapeutic_area2 </span></span>with uuid <span class="sgr32">31a61295 </span>of type <span class="sgr32">FreeAgent </span>
       <span class="sgr1">inner agents: </span>demand, dx, removed-molecules</code></pre><pre><code class="language-julia hljs">getagent(pharma_model, glob&quot;therapeutic_area?/&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{FreeAgent}:
 FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}
 FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}</code></pre><h2 id="Simulating-the-System"><a class="docs-heading-anchor" href="#Simulating-the-System">Simulating the System</a><a id="Simulating-the-System-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-the-System" title="Permalink"></a></h2><p>Let&#39;s next evolve the composite model over a hundred time units. The last argument is optional here; see <code>?simulate</code> for the details.</p><pre><code class="language-julia hljs"># let the problem evolve
simulate(pharma_model, 100)

getagent(pharma_model, &quot;therapeutic_area1/dx&quot;)

getagent(pharma_model, &quot;therapeutic_area1/demand&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">agent <span class="sgr32"><span class="sgr1">demand </span></span>with uuid <span class="sgr32">d380e35f </span>of type <span class="sgr32">DiffEqAgent </span>
   custom properties:
   <span class="sgr3">integrator: </span>
t: 100.0
u: 2.5764487191894188
   <span class="sgr3">observables: </span>demand (index: 1)
   <span class="sgr1">parent: </span><span class="sgr32">therapeutic_area1</span></code></pre><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><p>We draw the statistics of a Discovery unit in Therapeutic Area 1:</p><pre><code class="language-julia hljs">draw(getagent(pharma_model, &quot;therapeutic_area1/dx&quot;))</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip850">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip850)" d="M0 1600 L2400 1600 L2400 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip851">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip850)" d="M169.121 1423.18 L2352.76 1423.18 L2352.76 47.2441 L169.121 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip852">
    <rect x="169" y="47" width="2185" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="230.922,1423.18 230.922,47.2441 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="751.133,1423.18 751.133,47.2441 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1271.34,1423.18 1271.34,47.2441 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1791.55,1423.18 1791.55,47.2441 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2311.76,1423.18 2311.76,47.2441 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,1423.18 2352.76,1423.18 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="230.922,1423.18 230.922,1404.28 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="751.133,1423.18 751.133,1404.28 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1271.34,1423.18 1271.34,1404.28 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1791.55,1423.18 1791.55,1404.28 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2311.76,1423.18 2311.76,1404.28 "/>
<path clip-path="url(#clip850)" d="M230.922 1454.1 Q227.311 1454.1 225.483 1457.66 Q223.677 1461.2 223.677 1468.33 Q223.677 1475.44 225.483 1479.01 Q227.311 1482.55 230.922 1482.55 Q234.557 1482.55 236.362 1479.01 Q238.191 1475.44 238.191 1468.33 Q238.191 1461.2 236.362 1457.66 Q234.557 1454.1 230.922 1454.1 M230.922 1450.39 Q236.732 1450.39 239.788 1455 Q242.867 1459.58 242.867 1468.33 Q242.867 1477.06 239.788 1481.67 Q236.732 1486.25 230.922 1486.25 Q225.112 1486.25 222.033 1481.67 Q218.978 1477.06 218.978 1468.33 Q218.978 1459.58 222.033 1455 Q225.112 1450.39 230.922 1450.39 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M730.403 1481.64 L746.723 1481.64 L746.723 1485.58 L724.779 1485.58 L724.779 1481.64 Q727.441 1478.89 732.024 1474.26 Q736.63 1469.61 737.811 1468.27 Q740.056 1465.74 740.936 1464.01 Q741.839 1462.25 741.839 1460.56 Q741.839 1457.8 739.894 1456.07 Q737.973 1454.33 734.871 1454.33 Q732.672 1454.33 730.218 1455.09 Q727.788 1455.86 725.01 1457.41 L725.01 1452.69 Q727.834 1451.55 730.288 1450.97 Q732.741 1450.39 734.778 1450.39 Q740.149 1450.39 743.343 1453.08 Q746.538 1455.77 746.538 1460.26 Q746.538 1462.39 745.727 1464.31 Q744.94 1466.2 742.834 1468.8 Q742.255 1469.47 739.153 1472.69 Q736.052 1475.88 730.403 1481.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M756.584 1451.02 L774.94 1451.02 L774.94 1454.96 L760.866 1454.96 L760.866 1463.43 Q761.885 1463.08 762.903 1462.92 Q763.922 1462.73 764.94 1462.73 Q770.727 1462.73 774.107 1465.9 Q777.487 1469.08 777.487 1474.49 Q777.487 1480.07 774.014 1483.17 Q770.542 1486.25 764.223 1486.25 Q762.047 1486.25 759.778 1485.88 Q757.533 1485.51 755.126 1484.77 L755.126 1480.07 Q757.209 1481.2 759.431 1481.76 Q761.653 1482.32 764.13 1482.32 Q768.135 1482.32 770.473 1480.21 Q772.811 1478.1 772.811 1474.49 Q772.811 1470.88 770.473 1468.77 Q768.135 1466.67 764.13 1466.67 Q762.255 1466.67 760.38 1467.08 Q758.528 1467.5 756.584 1468.38 L756.584 1451.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M1246.04 1451.02 L1264.4 1451.02 L1264.4 1454.96 L1250.32 1454.96 L1250.32 1463.43 Q1251.34 1463.08 1252.36 1462.92 Q1253.38 1462.73 1254.4 1462.73 Q1260.19 1462.73 1263.57 1465.9 Q1266.94 1469.08 1266.94 1474.49 Q1266.94 1480.07 1263.47 1483.17 Q1260 1486.25 1253.68 1486.25 Q1251.5 1486.25 1249.24 1485.88 Q1246.99 1485.51 1244.58 1484.77 L1244.58 1480.07 Q1246.67 1481.2 1248.89 1481.76 Q1251.11 1482.32 1253.59 1482.32 Q1257.59 1482.32 1259.93 1480.21 Q1262.27 1478.1 1262.27 1474.49 Q1262.27 1470.88 1259.93 1468.77 Q1257.59 1466.67 1253.59 1466.67 Q1251.71 1466.67 1249.84 1467.08 Q1247.99 1467.5 1246.04 1468.38 L1246.04 1451.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M1286.16 1454.1 Q1282.55 1454.1 1280.72 1457.66 Q1278.91 1461.2 1278.91 1468.33 Q1278.91 1475.44 1280.72 1479.01 Q1282.55 1482.55 1286.16 1482.55 Q1289.79 1482.55 1291.6 1479.01 Q1293.43 1475.44 1293.43 1468.33 Q1293.43 1461.2 1291.6 1457.66 Q1289.79 1454.1 1286.16 1454.1 M1286.16 1450.39 Q1291.97 1450.39 1295.02 1455 Q1298.1 1459.58 1298.1 1468.33 Q1298.1 1477.06 1295.02 1481.67 Q1291.97 1486.25 1286.16 1486.25 Q1280.35 1486.25 1277.27 1481.67 Q1274.21 1477.06 1274.21 1468.33 Q1274.21 1459.58 1277.27 1455 Q1280.35 1450.39 1286.16 1450.39 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M1765.41 1451.02 L1787.63 1451.02 L1787.63 1453.01 L1775.08 1485.58 L1770.2 1485.58 L1782 1454.96 L1765.41 1454.96 L1765.41 1451.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M1796.8 1451.02 L1815.15 1451.02 L1815.15 1454.96 L1801.08 1454.96 L1801.08 1463.43 Q1802.1 1463.08 1803.12 1462.92 Q1804.13 1462.73 1805.15 1462.73 Q1810.94 1462.73 1814.32 1465.9 Q1817.7 1469.08 1817.7 1474.49 Q1817.7 1480.07 1814.23 1483.17 Q1810.75 1486.25 1804.43 1486.25 Q1802.26 1486.25 1799.99 1485.88 Q1797.75 1485.51 1795.34 1484.77 L1795.34 1480.07 Q1797.42 1481.2 1799.64 1481.76 Q1801.87 1482.32 1804.34 1482.32 Q1808.35 1482.32 1810.68 1480.21 Q1813.02 1478.1 1813.02 1474.49 Q1813.02 1470.88 1810.68 1468.77 Q1808.35 1466.67 1804.34 1466.67 Q1802.47 1466.67 1800.59 1467.08 Q1798.74 1467.5 1796.8 1468.38 L1796.8 1451.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M2271.37 1481.64 L2279.01 1481.64 L2279.01 1455.28 L2270.7 1456.95 L2270.7 1452.69 L2278.96 1451.02 L2283.64 1451.02 L2283.64 1481.64 L2291.28 1481.64 L2291.28 1485.58 L2271.37 1485.58 L2271.37 1481.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M2310.72 1454.1 Q2307.11 1454.1 2305.28 1457.66 Q2303.48 1461.2 2303.48 1468.33 Q2303.48 1475.44 2305.28 1479.01 Q2307.11 1482.55 2310.72 1482.55 Q2314.36 1482.55 2316.16 1479.01 Q2317.99 1475.44 2317.99 1468.33 Q2317.99 1461.2 2316.16 1457.66 Q2314.36 1454.1 2310.72 1454.1 M2310.72 1450.39 Q2316.53 1450.39 2319.59 1455 Q2322.67 1459.58 2322.67 1468.33 Q2322.67 1477.06 2319.59 1481.67 Q2316.53 1486.25 2310.72 1486.25 Q2304.91 1486.25 2301.83 1481.67 Q2298.78 1477.06 2298.78 1468.33 Q2298.78 1459.58 2301.83 1455 Q2304.91 1450.39 2310.72 1450.39 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M2340.88 1454.1 Q2337.27 1454.1 2335.44 1457.66 Q2333.64 1461.2 2333.64 1468.33 Q2333.64 1475.44 2335.44 1479.01 Q2337.27 1482.55 2340.88 1482.55 Q2344.52 1482.55 2346.32 1479.01 Q2348.15 1475.44 2348.15 1468.33 Q2348.15 1461.2 2346.32 1457.66 Q2344.52 1454.1 2340.88 1454.1 M2340.88 1450.39 Q2346.69 1450.39 2349.75 1455 Q2352.83 1459.58 2352.83 1468.33 Q2352.83 1477.06 2349.75 1481.67 Q2346.69 1486.25 2340.88 1486.25 Q2335.07 1486.25 2331.99 1481.67 Q2328.94 1477.06 2328.94 1468.33 Q2328.94 1459.58 2331.99 1455 Q2335.07 1450.39 2340.88 1450.39 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M1260 1522.27 L1260 1532.4 L1272.06 1532.4 L1272.06 1536.95 L1260 1536.95 L1260 1556.3 Q1260 1560.66 1261.18 1561.9 Q1262.39 1563.14 1266.05 1563.14 L1272.06 1563.14 L1272.06 1568.04 L1266.05 1568.04 Q1259.27 1568.04 1256.69 1565.53 Q1254.11 1562.98 1254.11 1556.3 L1254.11 1536.95 L1249.81 1536.95 L1249.81 1532.4 L1254.11 1532.4 L1254.11 1522.27 L1260 1522.27 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,1384.24 2352.76,1384.24 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,1173.17 2352.76,1173.17 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,962.107 2352.76,962.107 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,751.042 2352.76,751.042 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,539.976 2352.76,539.976 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,328.911 2352.76,328.911 "/>
<polyline clip-path="url(#clip852)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="169.121,117.845 2352.76,117.845 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,1423.18 169.121,47.2441 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,1384.24 188.019,1384.24 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,1173.17 188.019,1173.17 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,962.107 188.019,962.107 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,751.042 188.019,751.042 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,539.976 188.019,539.976 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,328.911 188.019,328.911 "/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="169.121,117.845 188.019,117.845 "/>
<path clip-path="url(#clip850)" d="M121.177 1370.04 Q117.566 1370.04 115.737 1373.6 Q113.932 1377.14 113.932 1384.27 Q113.932 1391.38 115.737 1394.94 Q117.566 1398.49 121.177 1398.49 Q124.811 1398.49 126.617 1394.94 Q128.445 1391.38 128.445 1384.27 Q128.445 1377.14 126.617 1373.6 Q124.811 1370.04 121.177 1370.04 M121.177 1366.33 Q126.987 1366.33 130.043 1370.94 Q133.121 1375.52 133.121 1384.27 Q133.121 1393 130.043 1397.61 Q126.987 1402.19 121.177 1402.19 Q115.367 1402.19 112.288 1397.61 Q109.233 1393 109.233 1384.27 Q109.233 1375.52 112.288 1370.94 Q115.367 1366.33 121.177 1366.33 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M85.0429 1186.52 L101.362 1186.52 L101.362 1190.45 L79.4179 1190.45 L79.4179 1186.52 Q82.0799 1183.76 86.6632 1179.13 Q91.2697 1174.48 92.4502 1173.14 Q94.6956 1170.61 95.5752 1168.88 Q96.478 1167.12 96.478 1165.43 Q96.478 1162.68 94.5336 1160.94 Q92.6123 1159.2 89.5104 1159.2 Q87.3114 1159.2 84.8577 1159.97 Q82.4271 1160.73 79.6494 1162.28 L79.6494 1157.56 Q82.4734 1156.43 84.9271 1155.85 Q87.3808 1155.27 89.4178 1155.27 Q94.7882 1155.27 97.9826 1157.95 Q101.177 1160.64 101.177 1165.13 Q101.177 1167.26 100.367 1169.18 Q99.5798 1171.08 97.4734 1173.67 Q96.8947 1174.34 93.7928 1177.56 Q90.691 1180.75 85.0429 1186.52 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 1158.97 Q117.566 1158.97 115.737 1162.54 Q113.932 1166.08 113.932 1173.21 Q113.932 1180.31 115.737 1183.88 Q117.566 1187.42 121.177 1187.42 Q124.811 1187.42 126.617 1183.88 Q128.445 1180.31 128.445 1173.21 Q128.445 1166.08 126.617 1162.54 Q124.811 1158.97 121.177 1158.97 M121.177 1155.27 Q126.987 1155.27 130.043 1159.87 Q133.121 1164.46 133.121 1173.21 Q133.121 1181.93 130.043 1186.54 Q126.987 1191.12 121.177 1191.12 Q115.367 1191.12 112.288 1186.54 Q109.233 1181.93 109.233 1173.21 Q109.233 1164.46 112.288 1159.87 Q115.367 1155.27 121.177 1155.27 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M93.8623 948.901 L82.0568 967.35 L93.8623 967.35 L93.8623 948.901 M92.6354 944.827 L98.515 944.827 L98.515 967.35 L103.446 967.35 L103.446 971.239 L98.515 971.239 L98.515 979.387 L93.8623 979.387 L93.8623 971.239 L78.2605 971.239 L78.2605 966.725 L92.6354 944.827 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 947.906 Q117.566 947.906 115.737 951.471 Q113.932 955.012 113.932 962.142 Q113.932 969.249 115.737 972.813 Q117.566 976.355 121.177 976.355 Q124.811 976.355 126.617 972.813 Q128.445 969.249 128.445 962.142 Q128.445 955.012 126.617 951.471 Q124.811 947.906 121.177 947.906 M121.177 944.202 Q126.987 944.202 130.043 948.809 Q133.121 953.392 133.121 962.142 Q133.121 970.869 130.043 975.475 Q126.987 980.059 121.177 980.059 Q115.367 980.059 112.288 975.475 Q109.233 970.869 109.233 962.142 Q109.233 953.392 112.288 948.809 Q115.367 944.202 121.177 944.202 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M91.5938 749.178 Q88.4456 749.178 86.5938 751.331 Q84.7651 753.484 84.7651 757.234 Q84.7651 760.961 86.5938 763.137 Q88.4456 765.289 91.5938 765.289 Q94.7419 765.289 96.5706 763.137 Q98.4224 760.961 98.4224 757.234 Q98.4224 753.484 96.5706 751.331 Q94.7419 749.178 91.5938 749.178 M100.876 734.526 L100.876 738.785 Q99.1169 737.952 97.3113 737.512 Q95.5289 737.072 93.7697 737.072 Q89.1401 737.072 86.6864 740.197 Q84.2558 743.322 83.9086 749.641 Q85.2743 747.628 87.3345 746.563 Q89.3947 745.475 91.8715 745.475 Q97.0798 745.475 100.089 748.646 Q103.121 751.794 103.121 757.234 Q103.121 762.558 99.9733 765.776 Q96.8252 768.993 91.5938 768.993 Q85.5984 768.993 82.4271 764.41 Q79.2559 759.803 79.2559 751.077 Q79.2559 742.882 83.1447 738.021 Q87.0336 733.137 93.5845 733.137 Q95.3437 733.137 97.1261 733.484 Q98.9317 733.831 100.876 734.526 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 736.841 Q117.566 736.841 115.737 740.405 Q113.932 743.947 113.932 751.077 Q113.932 758.183 115.737 761.748 Q117.566 765.289 121.177 765.289 Q124.811 765.289 126.617 761.748 Q128.445 758.183 128.445 751.077 Q128.445 743.947 126.617 740.405 Q124.811 736.841 121.177 736.841 M121.177 733.137 Q126.987 733.137 130.043 737.743 Q133.121 742.327 133.121 751.077 Q133.121 759.803 130.043 764.41 Q126.987 768.993 121.177 768.993 Q115.367 768.993 112.288 764.41 Q109.233 759.803 109.233 751.077 Q109.233 742.327 112.288 737.743 Q115.367 733.137 121.177 733.137 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M91.0151 540.844 Q87.6817 540.844 85.7605 542.627 Q83.8623 544.409 83.8623 547.534 Q83.8623 550.659 85.7605 552.442 Q87.6817 554.224 91.0151 554.224 Q94.3484 554.224 96.2697 552.442 Q98.1909 550.636 98.1909 547.534 Q98.1909 544.409 96.2697 542.627 Q94.3715 540.844 91.0151 540.844 M86.3392 538.854 Q83.3299 538.113 81.6401 536.053 Q79.9735 533.993 79.9735 531.03 Q79.9735 526.886 82.9133 524.479 Q85.8762 522.071 91.0151 522.071 Q96.1771 522.071 99.1169 524.479 Q102.057 526.886 102.057 531.03 Q102.057 533.993 100.367 536.053 Q98.7002 538.113 95.7141 538.854 Q99.0937 539.641 100.969 541.932 Q102.867 544.224 102.867 547.534 Q102.867 552.557 99.7882 555.243 Q96.7326 557.928 91.0151 557.928 Q85.2975 557.928 82.2188 555.243 Q79.1633 552.557 79.1633 547.534 Q79.1633 544.224 81.0614 541.932 Q82.9595 539.641 86.3392 538.854 M84.6262 531.47 Q84.6262 534.155 86.2929 535.659 Q87.9827 537.164 91.0151 537.164 Q94.0243 537.164 95.7141 535.659 Q97.4271 534.155 97.4271 531.47 Q97.4271 528.784 95.7141 527.28 Q94.0243 525.775 91.0151 525.775 Q87.9827 525.775 86.2929 527.28 Q84.6262 528.784 84.6262 531.47 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 525.775 Q117.566 525.775 115.737 529.34 Q113.932 532.882 113.932 540.011 Q113.932 547.118 115.737 550.682 Q117.566 554.224 121.177 554.224 Q124.811 554.224 126.617 550.682 Q128.445 547.118 128.445 540.011 Q128.445 532.882 126.617 529.34 Q124.811 525.775 121.177 525.775 M121.177 522.071 Q126.987 522.071 130.043 526.678 Q133.121 531.261 133.121 540.011 Q133.121 548.738 130.043 553.344 Q126.987 557.928 121.177 557.928 Q115.367 557.928 112.288 553.344 Q109.233 548.738 109.233 540.011 Q109.233 531.261 112.288 526.678 Q115.367 522.071 121.177 522.071 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M51.6634 342.256 L59.3023 342.256 L59.3023 315.89 L50.9921 317.557 L50.9921 313.298 L59.256 311.631 L63.9319 311.631 L63.9319 342.256 L71.5707 342.256 L71.5707 346.191 L51.6634 346.191 L51.6634 342.256 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M91.0151 314.71 Q87.404 314.71 85.5753 318.274 Q83.7697 321.816 83.7697 328.946 Q83.7697 336.052 85.5753 339.617 Q87.404 343.159 91.0151 343.159 Q94.6493 343.159 96.4548 339.617 Q98.2835 336.052 98.2835 328.946 Q98.2835 321.816 96.4548 318.274 Q94.6493 314.71 91.0151 314.71 M91.0151 311.006 Q96.8252 311.006 99.8808 315.612 Q102.959 320.196 102.959 328.946 Q102.959 337.672 99.8808 342.279 Q96.8252 346.862 91.0151 346.862 Q85.2049 346.862 82.1262 342.279 Q79.0707 337.672 79.0707 328.946 Q79.0707 320.196 82.1262 315.612 Q85.2049 311.006 91.0151 311.006 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 314.71 Q117.566 314.71 115.737 318.274 Q113.932 321.816 113.932 328.946 Q113.932 336.052 115.737 339.617 Q117.566 343.159 121.177 343.159 Q124.811 343.159 126.617 339.617 Q128.445 336.052 128.445 328.946 Q128.445 321.816 126.617 318.274 Q124.811 314.71 121.177 314.71 M121.177 311.006 Q126.987 311.006 130.043 315.612 Q133.121 320.196 133.121 328.946 Q133.121 337.672 130.043 342.279 Q126.987 346.862 121.177 346.862 Q115.367 346.862 112.288 342.279 Q109.233 337.672 109.233 328.946 Q109.233 320.196 112.288 315.612 Q115.367 311.006 121.177 311.006 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M51.6634 131.19 L59.3023 131.19 L59.3023 104.825 L50.9921 106.491 L50.9921 102.232 L59.256 100.565 L63.9319 100.565 L63.9319 131.19 L71.5707 131.19 L71.5707 135.125 L51.6634 135.125 L51.6634 131.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M85.0429 131.19 L101.362 131.19 L101.362 135.125 L79.4179 135.125 L79.4179 131.19 Q82.0799 128.436 86.6632 123.806 Q91.2697 119.153 92.4502 117.811 Q94.6956 115.288 95.5752 113.552 Q96.478 111.792 96.478 110.102 Q96.478 107.348 94.5336 105.612 Q92.6123 103.876 89.5104 103.876 Q87.3114 103.876 84.8577 104.64 Q82.4271 105.403 79.6494 106.954 L79.6494 102.232 Q82.4734 101.098 84.9271 100.519 Q87.3808 99.9405 89.4178 99.9405 Q94.7882 99.9405 97.9826 102.626 Q101.177 105.311 101.177 109.802 Q101.177 111.931 100.367 113.852 Q99.5798 115.751 97.4734 118.343 Q96.8947 119.014 93.7928 122.232 Q90.691 125.426 85.0429 131.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M121.177 103.644 Q117.566 103.644 115.737 107.209 Q113.932 110.751 113.932 117.88 Q113.932 124.987 115.737 128.551 Q117.566 132.093 121.177 132.093 Q124.811 132.093 126.617 128.551 Q128.445 124.987 128.445 117.88 Q128.445 110.751 126.617 107.209 Q124.811 103.644 121.177 103.644 M121.177 99.9405 Q126.987 99.9405 130.043 104.547 Q133.121 109.13 133.121 117.88 Q133.121 126.607 130.043 131.213 Q126.987 135.797 121.177 135.797 Q115.367 135.797 112.288 131.213 Q109.233 126.607 109.233 117.88 Q109.233 109.13 112.288 104.547 Q115.367 99.9405 121.177 99.9405 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip852)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="230.922,1225.94 293.348,1183.73 355.773,1236.49 418.198,1236.49 480.623,1194.28 543.048,1225.94 605.474,1204.83 667.899,1225.94 730.324,1204.83 792.749,1141.51 855.175,1173.17 917.6,1215.39 980.025,1152.07 1042.45,1173.17 1104.88,1183.73 1167.3,1173.17 1229.73,1204.83 1292.15,1109.85 1354.58,1194.28 1417,1057.09 1479.43,1162.62 1541.85,1120.41 1604.28,1109.85 1666.7,1099.3 1729.13,951.554 1791.55,1088.75 1853.98,1120.41 1916.4,1046.53 1978.83,1004.32 2041.25,1035.98 2103.68,877.681 2166.1,930.448 2228.53,983.214 2290.95,1014.87 "/>
<polyline clip-path="url(#clip852)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="230.922,1057.09 293.348,1046.53 355.773,1046.53 418.198,983.214 480.623,1035.98 543.048,1078.19 605.474,898.788 667.899,1046.53 730.324,1130.96 792.749,930.448 855.175,962.107 917.6,993.767 980.025,962.107 1042.45,846.021 1104.88,1025.43 1167.3,909.341 1229.73,983.214 1292.15,930.448 1354.58,919.894 1417,951.554 1479.43,867.128 1541.85,677.169 1604.28,835.468 1666.7,751.042 1729.13,846.021 1791.55,919.894 1853.98,793.255 1916.4,761.595 1978.83,656.062 2041.25,719.382 2103.68,677.169 2166.1,613.849 2228.53,518.87 2290.95,508.317 "/>
<polyline clip-path="url(#clip852)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="230.922,1384.24 293.348,983.214 355.773,898.788 418.198,898.788 480.623,803.808 543.048,814.362 605.474,962.107 667.899,740.489 730.324,877.681 792.749,919.894 855.175,708.829 917.6,772.148 980.025,772.148 1042.45,793.255 1104.88,634.956 1167.3,761.595 1229.73,740.489 1292.15,803.808 1354.58,677.169 1417,751.042 1479.43,603.296 1541.85,634.956 1604.28,455.55 1666.7,571.636 1729.13,539.976 1791.55,307.804 1853.98,687.722 1916.4,466.104 1978.83,444.997 2041.25,392.231 2103.68,339.464 2166.1,223.378 2228.53,138.952 2290.95,86.1857 "/>
<path clip-path="url(#clip850)" d="M241.909 300.469 L661.776 300.469 L661.776 93.1086 L241.909 93.1086  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip850)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="241.909,300.469 661.776,300.469 661.776,93.1086 241.909,93.1086 241.909,300.469 "/>
<polyline clip-path="url(#clip850)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="266.172,144.949 411.747,144.949 "/>
<path clip-path="url(#clip850)" d="M454.436 137.067 L454.436 141.094 Q452.63 140.169 450.686 139.706 Q448.741 139.243 446.658 139.243 Q443.487 139.243 441.89 140.215 Q440.316 141.187 440.316 143.131 Q440.316 144.613 441.45 145.469 Q442.584 146.303 446.01 147.067 L447.468 147.391 Q452.005 148.363 453.903 150.145 Q455.825 151.905 455.825 155.076 Q455.825 158.687 452.954 160.793 Q450.107 162.9 445.107 162.9 Q443.024 162.9 440.755 162.483 Q438.51 162.09 436.01 161.28 L436.01 156.881 Q438.371 158.108 440.663 158.733 Q442.954 159.335 445.2 159.335 Q448.209 159.335 449.829 158.317 Q451.45 157.275 451.45 155.4 Q451.45 153.664 450.269 152.738 Q449.112 151.812 445.153 150.956 L443.672 150.608 Q439.714 149.775 437.954 148.062 Q436.195 146.326 436.195 143.317 Q436.195 139.659 438.788 137.669 Q441.38 135.678 446.149 135.678 Q448.51 135.678 450.593 136.025 Q452.677 136.372 454.436 137.067 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M482.792 141.28 Q484.389 138.409 486.612 137.044 Q488.834 135.678 491.843 135.678 Q495.894 135.678 498.093 138.525 Q500.292 141.349 500.292 146.581 L500.292 162.229 L496.01 162.229 L496.01 146.719 Q496.01 142.993 494.69 141.187 Q493.371 139.382 490.662 139.382 Q487.352 139.382 485.431 141.581 Q483.51 143.78 483.51 147.576 L483.51 162.229 L479.227 162.229 L479.227 146.719 Q479.227 142.969 477.908 141.187 Q476.588 139.382 473.834 139.382 Q470.57 139.382 468.649 141.604 Q466.727 143.803 466.727 147.576 L466.727 162.229 L462.445 162.229 L462.445 136.303 L466.727 136.303 L466.727 140.331 Q468.186 137.946 470.223 136.812 Q472.26 135.678 475.061 135.678 Q477.885 135.678 479.852 137.113 Q481.843 138.548 482.792 141.28 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M520.57 149.196 Q515.408 149.196 513.417 150.377 Q511.426 151.557 511.426 154.405 Q511.426 156.673 512.908 158.016 Q514.412 159.335 516.982 159.335 Q520.523 159.335 522.653 156.835 Q524.806 154.312 524.806 150.145 L524.806 149.196 L520.57 149.196 M529.065 147.437 L529.065 162.229 L524.806 162.229 L524.806 158.293 Q523.347 160.655 521.172 161.789 Q518.996 162.9 515.848 162.9 Q511.866 162.9 509.505 160.678 Q507.167 158.432 507.167 154.682 Q507.167 150.307 510.084 148.085 Q513.023 145.863 518.834 145.863 L524.806 145.863 L524.806 145.446 Q524.806 142.507 522.861 140.909 Q520.94 139.289 517.445 139.289 Q515.223 139.289 513.116 139.821 Q511.01 140.354 509.065 141.419 L509.065 137.483 Q511.403 136.581 513.602 136.141 Q515.801 135.678 517.885 135.678 Q523.51 135.678 526.287 138.594 Q529.065 141.511 529.065 147.437 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M537.838 126.21 L542.097 126.21 L542.097 162.229 L537.838 162.229 L537.838 126.21 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M551.009 126.21 L555.269 126.21 L555.269 162.229 L551.009 162.229 L551.009 126.21 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip850)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="266.172,196.789 411.747,196.789 "/>
<path clip-path="url(#clip850)" d="M436.01 178.05 L440.269 178.05 L440.269 214.069 L436.01 214.069 L436.01 178.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M460.964 201.036 Q455.802 201.036 453.811 202.217 Q451.82 203.397 451.82 206.245 Q451.82 208.513 453.302 209.856 Q454.806 211.175 457.376 211.175 Q460.917 211.175 463.047 208.675 Q465.2 206.152 465.2 201.985 L465.2 201.036 L460.964 201.036 M469.459 199.277 L469.459 214.069 L465.2 214.069 L465.2 210.133 Q463.741 212.495 461.565 213.629 Q459.389 214.74 456.241 214.74 Q452.26 214.74 449.899 212.518 Q447.561 210.272 447.561 206.522 Q447.561 202.147 450.478 199.925 Q453.417 197.703 459.227 197.703 L465.2 197.703 L465.2 197.286 Q465.2 194.347 463.255 192.749 Q461.334 191.129 457.839 191.129 Q455.616 191.129 453.51 191.661 Q451.403 192.194 449.459 193.259 L449.459 189.323 Q451.797 188.421 453.996 187.981 Q456.195 187.518 458.278 187.518 Q463.903 187.518 466.681 190.434 Q469.459 193.351 469.459 199.277 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M493.255 192.124 Q492.537 191.708 491.681 191.522 Q490.848 191.314 489.829 191.314 Q486.218 191.314 484.274 193.675 Q482.352 196.013 482.352 200.411 L482.352 214.069 L478.07 214.069 L478.07 188.143 L482.352 188.143 L482.352 192.171 Q483.695 189.809 485.848 188.675 Q488 187.518 491.079 187.518 Q491.519 187.518 492.051 187.587 Q492.584 187.634 493.232 187.749 L493.255 192.124 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M513.949 200.805 Q513.949 196.175 512.028 193.629 Q510.13 191.083 506.681 191.083 Q503.255 191.083 501.334 193.629 Q499.436 196.175 499.436 200.805 Q499.436 205.411 501.334 207.958 Q503.255 210.504 506.681 210.504 Q510.13 210.504 512.028 207.958 Q513.949 205.411 513.949 200.805 M518.209 210.851 Q518.209 217.471 515.269 220.689 Q512.329 223.93 506.264 223.93 Q504.019 223.93 502.028 223.582 Q500.037 223.258 498.162 222.564 L498.162 218.42 Q500.037 219.439 501.866 219.925 Q503.695 220.411 505.593 220.411 Q509.783 220.411 511.866 218.212 Q513.949 216.036 513.949 211.615 L513.949 209.508 Q512.63 211.8 510.57 212.934 Q508.51 214.069 505.639 214.069 Q500.871 214.069 497.954 210.434 Q495.037 206.8 495.037 200.805 Q495.037 194.786 497.954 191.152 Q500.871 187.518 505.639 187.518 Q508.51 187.518 510.57 188.652 Q512.63 189.786 513.949 192.078 L513.949 188.143 L518.209 188.143 L518.209 210.851 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M549.158 200.041 L549.158 202.124 L529.574 202.124 Q529.852 206.522 532.213 208.837 Q534.597 211.129 538.834 211.129 Q541.287 211.129 543.579 210.527 Q545.894 209.925 548.162 208.721 L548.162 212.749 Q545.871 213.721 543.463 214.231 Q541.056 214.74 538.579 214.74 Q532.375 214.74 528.741 211.129 Q525.13 207.518 525.13 201.36 Q525.13 194.995 528.556 191.268 Q532.005 187.518 537.838 187.518 Q543.07 187.518 546.102 190.897 Q549.158 194.254 549.158 200.041 M544.898 198.791 Q544.852 195.296 542.931 193.212 Q541.033 191.129 537.884 191.129 Q534.32 191.129 532.167 193.143 Q530.037 195.157 529.713 198.814 L544.898 198.791 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip850)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="266.172,248.629 411.747,248.629 "/>
<path clip-path="url(#clip850)" d="M451.195 243.964 Q450.478 243.548 449.621 243.362 Q448.788 243.154 447.769 243.154 Q444.158 243.154 442.214 245.515 Q440.292 247.853 440.292 252.251 L440.292 265.909 L436.01 265.909 L436.01 239.983 L440.292 239.983 L440.292 244.011 Q441.635 241.649 443.788 240.515 Q445.94 239.358 449.019 239.358 Q449.459 239.358 449.991 239.427 Q450.524 239.474 451.172 239.589 L451.195 243.964 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M476.797 251.881 L476.797 253.964 L457.214 253.964 Q457.491 258.362 459.852 260.677 Q462.237 262.969 466.473 262.969 Q468.926 262.969 471.218 262.367 Q473.533 261.765 475.801 260.561 L475.801 264.589 Q473.51 265.561 471.102 266.071 Q468.695 266.58 466.218 266.58 Q460.014 266.58 456.38 262.969 Q452.769 259.358 452.769 253.2 Q452.769 246.835 456.195 243.108 Q459.644 239.358 465.477 239.358 Q470.709 239.358 473.741 242.737 Q476.797 246.094 476.797 251.881 M472.538 250.631 Q472.491 247.136 470.57 245.052 Q468.672 242.969 465.524 242.969 Q461.959 242.969 459.806 244.983 Q457.677 246.997 457.352 250.654 L472.538 250.631 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M503.973 244.96 Q505.57 242.089 507.792 240.724 Q510.014 239.358 513.023 239.358 Q517.074 239.358 519.273 242.205 Q521.472 245.029 521.472 250.261 L521.472 265.909 L517.19 265.909 L517.19 250.399 Q517.19 246.673 515.871 244.867 Q514.551 243.062 511.843 243.062 Q508.533 243.062 506.611 245.261 Q504.69 247.46 504.69 251.256 L504.69 265.909 L500.408 265.909 L500.408 250.399 Q500.408 246.649 499.088 244.867 Q497.769 243.062 495.014 243.062 Q491.75 243.062 489.829 245.284 Q487.908 247.483 487.908 251.256 L487.908 265.909 L483.625 265.909 L483.625 239.983 L487.908 239.983 L487.908 244.011 Q489.366 241.626 491.403 240.492 Q493.44 239.358 496.241 239.358 Q499.065 239.358 501.033 240.793 Q503.024 242.228 503.973 244.96 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M540.014 242.969 Q536.588 242.969 534.597 245.654 Q532.607 248.316 532.607 252.969 Q532.607 257.622 534.574 260.307 Q536.565 262.969 540.014 262.969 Q543.417 262.969 545.408 260.284 Q547.398 257.598 547.398 252.969 Q547.398 248.362 545.408 245.677 Q543.417 242.969 540.014 242.969 M540.014 239.358 Q545.57 239.358 548.741 242.969 Q551.912 246.58 551.912 252.969 Q551.912 259.335 548.741 262.969 Q545.57 266.58 540.014 266.58 Q534.435 266.58 531.264 262.969 Q528.116 259.335 528.116 252.969 Q528.116 246.58 531.264 242.969 Q534.435 239.358 540.014 239.358 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M555.917 239.983 L560.431 239.983 L568.532 261.742 L576.634 239.983 L581.148 239.983 L571.426 265.909 L565.639 265.909 L555.917 239.983 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M609.204 251.881 L609.204 253.964 L589.62 253.964 Q589.898 258.362 592.259 260.677 Q594.643 262.969 598.879 262.969 Q601.333 262.969 603.625 262.367 Q605.94 261.765 608.208 260.561 L608.208 264.589 Q605.916 265.561 603.509 266.071 Q601.102 266.58 598.625 266.58 Q592.421 266.58 588.787 262.969 Q585.176 259.358 585.176 253.2 Q585.176 246.835 588.602 243.108 Q592.051 239.358 597.884 239.358 Q603.116 239.358 606.148 242.737 Q609.204 246.094 609.204 251.881 M604.944 250.631 Q604.898 247.136 602.977 245.052 Q601.079 242.969 597.93 242.969 Q594.366 242.969 592.213 244.983 Q590.083 246.997 589.759 250.654 L604.944 250.631 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip850)" d="M633.254 243.918 L633.254 229.89 L637.514 229.89 L637.514 265.909 L633.254 265.909 L633.254 262.02 Q631.912 264.335 629.852 265.469 Q627.815 266.58 624.944 266.58 Q620.245 266.58 617.282 262.83 Q614.342 259.08 614.342 252.969 Q614.342 246.858 617.282 243.108 Q620.245 239.358 624.944 239.358 Q627.815 239.358 629.852 240.492 Q631.912 241.603 633.254 243.918 M618.74 252.969 Q618.74 257.668 620.662 260.353 Q622.606 263.015 625.986 263.015 Q629.365 263.015 631.31 260.353 Q633.254 257.668 633.254 252.969 Q633.254 248.27 631.31 245.608 Q629.365 242.923 625.986 242.923 Q622.606 242.923 620.662 245.608 Q618.74 248.27 618.74 252.969 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /></svg>
<h2 id="Queries"><a class="docs-heading-anchor" href="#Queries">Queries</a><a id="Queries-1"></a><a class="docs-heading-anchor-permalink" href="#Queries" title="Permalink"></a></h2><p>Let&#39;s now query the simulated system.</p><p>To find out which molecules were discovered after time <code>t=10</code> and removed from the track before time <code>t=30</code>, write</p><pre><code class="language-julia hljs">pharma_model |&gt; @filter(_.birth_time &gt; 10 &amp;&amp; _.time_removed &lt; 30)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">638-element Vector{AbstractAlgebraicAgent}:
 Main.LargeMolecule{name=2kxMr, uuid=63d09280, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=BUnv8, uuid=cc7bfe60, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=vJNWL, uuid=caf6f14d, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=FKk7g, uuid=708d47b0, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=9lHx3, uuid=002c5f4b, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=OHyj2, uuid=937c28bd, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=VRjq3, uuid=67686253, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=Oslof, uuid=315e8051, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=IaAaX, uuid=b327d7d8, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=xwkhE, uuid=68212b4a, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 ⋮
 Main.LargeMolecule{name=jjgYg, uuid=caec5fdc, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=xuPKt, uuid=c62cf0ea, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=DxH0p, uuid=e73b8dc6, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.SmallMolecule{name=pzkPM, uuid=01977531, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=4q1OL, uuid=d63f0f9b, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=hlwlc, uuid=495031d7, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=AdltX, uuid=284e61bf, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=depLz, uuid=95a3fe02, parent=FreeAgent{name=removed-molecules, uuid=343ed2c0, parent=FreeAgent{name=therapeutic_area1, uuid=0e6fc1c8, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}
 Main.LargeMolecule{name=9ksOI, uuid=a1a7c4bc, parent=FreeAgent{name=removed-molecules, uuid=ed859c6c, parent=FreeAgent{name=therapeutic_area2, uuid=31a61295, parent=FreeAgent{name=pharma_model, uuid=e081a5db, parent=nothing}}}}</code></pre><p>Equivalently, we could make use of f(ilter)-strings, see <a href="../../index.html#AlgebraicAgents.@f_str"><code>@f_str</code></a>, and write</p><pre><code class="language-julia hljs">from = 10; to = 30
pharma_model |&gt; @filter(f&quot;_.birth_time &gt; $from &amp;&amp; _.time_removed &lt; $to&quot;);</code></pre><p>Let&#39;s investigate the average life time:</p><pre><code class="language-julia hljs"># get molecules already removed from the system
removed_molecules = pharma_model |&gt; @filter(f&quot;_.time_removed &lt; Inf&quot;)
# calculate `time_removed - birth_time`
# we iterate over `removed_molecules`, and apply the (named) transform function on each agent
# a given agent is referenced to as `_`
life_times = removed_molecules |&gt; @transform(area = getname(getagent(_, &quot;../..&quot;)), time=(_.time_removed - _.birth_time))

using Statistics: mean
avg_life_time = mean(x -&gt; x.time, life_times)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.5665776421213278</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../agents/agents.html">« Agents.jl Integration</a><a class="docs-footer-nextpage" href="../sciml/sciml.html">SciML Integration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 2 May 2023 16:37">Tuesday 2 May 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
